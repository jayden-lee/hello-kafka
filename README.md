# hello kafka

## Kafka 살펴보기

### Message
데이터의 기본 단위를 메시지라고한다. 메시지를 바이트 배열의 데이터로 간주하므로 특정한 형식을 따르지 않는다.

### Topic
메시지 데이터는 토픽으로 분류된 파티션에 있으며, 파티션을 결정하기 위해서 해시 값으로 키를 생성한다.

### Schema
메시지 구조를 나타내는 스키마를 사용할 수 있다. JSON, XML 등 사용할 수 있지만, 데이터 타입에 대한 지원과 버전 호환성을 위해서 apache avro를 많이 사용한다.

### Producer, Consumer
프로듀서는 새로운 메시지를 생성한다. 메시지가 어느 파티션에 생성되는지 관여하지 않으며, 만약 특정 파티션에 메시지를 넣기 위해서는 메시지 키와 파티셔너를 사용한다.

컨슈머는 하나 이상의 토픽을 구독하여 메시지가 생성된 순서대로 읽는다. 주키퍼 또는 카프카에서는 각 파티션에서 마지막에 읽은 메시지의 오프셋을 저장하므로 컨슈머가 읽기 중단했다가 다시 시작하더라도 이후 작업을 이어갈 수 있다.

### Broker
하나의 카프카 서버를 브로커라한다. 브로커는 프로듀서로부터 메시지를 수신하고 오프셋을 지정한 후 해당 메시지를 디스크에 저장한다. 컨슈머의 파티션 읽기 요청에 응답하고 디스크에 저장된 메시지를 전송한다.

카프카의 브로커는 클러스터의 일부로 동작하도로 설계되었다. 여러 개의 브로커가 하나의 클러스터에 포함될 수 있으며, 그 중 하나는 클러스터 컨트롤러의 기능을 수행한다.

### Zookeeper
브로커에서 사용하는 메타데이터를 저장 및 관리하기 위해서 주키퍼를 사용한다.